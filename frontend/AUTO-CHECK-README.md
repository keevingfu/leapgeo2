# ğŸ¤– è‡ªåŠ¨æ£€æŸ¥ç³»ç»Ÿè¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®é…ç½®äº†å®Œæ•´çš„è‡ªåŠ¨éªŒè¯ç³»ç»Ÿï¼Œç¡®ä¿æ¯æ¬¡ä»»åŠ¡å®Œæˆåé¡¹ç›®èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Œæ— é”™è¯¯ã€‚

---

## ğŸ¯ æ£€æŸ¥ç±»å‹

### 1. **ç±»å‹æ£€æŸ¥** (Type Check)
- **å‘½ä»¤**: `npm run type-check`
- **ä½œç”¨**: éªŒè¯ TypeScript ç±»å‹å®šä¹‰æ­£ç¡®
- **ä½•æ—¶è¿è¡Œ**: æ„å»ºå‰ã€æ‰‹åŠ¨éªŒè¯æ—¶

### 2. **æ„å»ºæ£€æŸ¥** (Build Check)
- **å‘½ä»¤**: `npm run build`
- **ä½œç”¨**: ç¡®ä¿é¡¹ç›®å¯ä»¥æˆåŠŸæ‰“åŒ…
- **ä½•æ—¶è¿è¡Œ**: å‘å¸ƒå‰ã€å®Œæ•´éªŒè¯æ—¶

### 3. **å¥åº·æ£€æŸ¥** (Health Check)
- **å‘½ä»¤**: `npm run health-check`
- **ä½œç”¨**: å¯åŠ¨å¼€å‘æœåŠ¡å™¨å¹¶éªŒè¯æ— é”™è¯¯
- **æ£€æŸ¥å†…å®¹**:
  - âœ… ç«¯å£å¯ç”¨æ€§
  - âœ… æœåŠ¡å™¨å¯åŠ¨
  - âœ… HTTP å“åº”æ­£å¸¸
  - âœ… æ— ç¼–è¯‘é”™è¯¯
  - âœ… æ— è¿è¡Œæ—¶é”™è¯¯

### 4. **å¿«é€Ÿæ£€æŸ¥** (Quick Check)
- **å‘½ä»¤**: `npm run quick-check`
- **ä½œç”¨**: å¿«é€ŸéªŒè¯ç±»å‹å’Œæ„å»º
- **é€‚ç”¨åœºæ™¯**: æäº¤ä»£ç å‰å¿«é€ŸéªŒè¯

### 5. **å®Œæ•´éªŒè¯** (Full Verify)
- **å‘½ä»¤**: `npm run verify`
- **ä½œç”¨**: è¿è¡Œç±»å‹æ£€æŸ¥ + æ„å»ºæ£€æŸ¥
- **é€‚ç”¨åœºæ™¯**: å®ŒæˆåŠŸèƒ½å¼€å‘å

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¼€å§‹

```bash
# 1. å¿«é€Ÿæ£€æŸ¥ï¼ˆç±»å‹ + æ„å»ºï¼‰
npm run quick-check

# 2. å®Œæ•´éªŒè¯
npm run verify

# 3. å¥åº·æ£€æŸ¥ï¼ˆå¯åŠ¨æœåŠ¡å™¨å¹¶éªŒè¯ï¼‰
npm run health-check

# 4. è‡ªåŠ¨éªŒè¯ï¼ˆè¯»å–é…ç½®æ–‡ä»¶ï¼‰
bash scripts/auto-verify.sh
```

### æ‰‹åŠ¨è¿è¡Œå•ä¸ªæ£€æŸ¥

```bash
# åªæ£€æŸ¥ç±»å‹
npm run type-check

# åªæ£€æŸ¥æ„å»º
npm run build

# åªæ£€æŸ¥ä»£ç è´¨é‡
npm run lint
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶

### `.autocheck.config.json`

é…ç½®æ–‡ä»¶å®šä¹‰äº†è‡ªåŠ¨æ£€æŸ¥çš„è¡Œä¸ºï¼š

```json
{
  "enabled": true,
  "checks": {
    "typeCheck": {
      "enabled": true,
      "failOnError": true
    },
    "build": {
      "enabled": true,
      "failOnError": true
    },
    "healthCheck": {
      "enabled": true,
      "runOnDemand": true
    }
  }
}
```

**é…ç½®é¡¹è¯´æ˜**:
- `enabled`: æ˜¯å¦å¯ç”¨è¯¥æ£€æŸ¥
- `failOnError`: å‡ºé”™æ—¶æ˜¯å¦åœæ­¢åç»­æ£€æŸ¥
- `runOnDemand`: æ˜¯å¦ä»…åœ¨æ‰‹åŠ¨è§¦å‘æ—¶è¿è¡Œ

---

## ğŸ“ æ—¥å¿—è®°å½•

æ‰€æœ‰æ£€æŸ¥ç»“æœä¼šè®°å½•åˆ° `.autocheck.log`ï¼š

```bash
# æŸ¥çœ‹æ—¥å¿—
cat .autocheck.log

# å®æ—¶ç›‘æ§æ—¥å¿—
tail -f .autocheck.log

# æ¸…ç©ºæ—¥å¿—
> .autocheck.log
```

---

## ğŸ”„ è‡ªåŠ¨è§¦å‘æ—¶æœº

### è‡ªåŠ¨è§¦å‘çš„åœºæ™¯

1. **å®‰è£…ä¾èµ–å** (`postinstall`)
   - æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯

2. **æ„å»ºå‰** (`prebuild`)
   - è‡ªåŠ¨è¿è¡Œç±»å‹æ£€æŸ¥

3. **æ‰‹åŠ¨éªŒè¯**
   - ä½¿ç”¨ `npm run verify`
   - ä½¿ç”¨ `bash scripts/auto-verify.sh`

### Git Hooks é›†æˆï¼ˆå¯é€‰ï¼‰

å¯ä»¥ä½¿ç”¨ Husky åœ¨ Git æäº¤å‰è‡ªåŠ¨è¿è¡Œæ£€æŸ¥ï¼š

```bash
# å®‰è£… husky
npm install -D husky

# åˆå§‹åŒ–
npx husky init

# æ·»åŠ  pre-commit hook
echo "npm run quick-check" > .husky/pre-commit
```

---

## ğŸ“Š æ£€æŸ¥æµç¨‹å›¾

```
å¼€å§‹
  â†“
ç±»å‹æ£€æŸ¥ (TypeScript)
  â†“
  âœ… é€šè¿‡ â†’ ç»§ç»­
  âŒ å¤±è´¥ â†’ åœæ­¢å¹¶æŠ¥é”™
  â†“
æ„å»ºæ£€æŸ¥ (Vite Build)
  â†“
  âœ… é€šè¿‡ â†’ ç»§ç»­
  âŒ å¤±è´¥ â†’ åœæ­¢å¹¶æŠ¥é”™
  â†“
å¥åº·æ£€æŸ¥ (Dev Server)
  â†“
  âœ… é€šè¿‡ â†’ å®Œæˆ
  âŒ å¤±è´¥ â†’ åœæ­¢å¹¶æŠ¥é”™
```

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### é—®é¢˜ 1: ç±»å‹æ£€æŸ¥å¤±è´¥

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
npm run type-check

# å¸¸è§åŸå› :
# - ç¼ºå°‘ç±»å‹å®šä¹‰
# - ç±»å‹ä¸åŒ¹é…
# - å¯¼å…¥è·¯å¾„é”™è¯¯
```

### é—®é¢˜ 2: æ„å»ºå¤±è´¥

```bash
# æŸ¥çœ‹æ„å»ºæ—¥å¿—
cat /tmp/build.log

# å¸¸è§åŸå› :
# - è¯­æ³•é”™è¯¯
# - ç¼ºå°‘ä¾èµ–
# - ç¯å¢ƒå˜é‡æœªè®¾ç½®
```

### é—®é¢˜ 3: å¥åº·æ£€æŸ¥è¶…æ—¶

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -ti:5173 | xargs kill -9

# é‡æ–°è¿è¡Œ
npm run health-check
```

### é—®é¢˜ 4: è„šæœ¬æƒé™é”™è¯¯

```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x scripts/*.sh
chmod +x scripts/*.js
```

---

## ğŸ“ˆ æœ€ä½³å®è·µ

### 1. **å¼€å‘å‰**
```bash
npm run type-check  # ç¡®ä¿ç±»å‹æ­£ç¡®
```

### 2. **å¼€å‘ä¸­**
```bash
npm run dev  # æ­£å¸¸å¼€å‘ï¼Œçƒ­æ›´æ–°
```

### 3. **æäº¤å‰**
```bash
npm run quick-check  # å¿«é€ŸéªŒè¯
```

### 4. **å‘å¸ƒå‰**
```bash
npm run verify        # å®Œæ•´éªŒè¯
npm run health-check  # å¥åº·æ£€æŸ¥
```

### 5. **æ¯æ¬¡ä»»åŠ¡å®Œæˆå**
```bash
bash scripts/auto-verify.sh  # è‡ªåŠ¨éªŒè¯
```

---

## ğŸ¨ è‡ªå®šä¹‰æ£€æŸ¥

### æ·»åŠ æ–°çš„æ£€æŸ¥é¡¹

1. åœ¨ `.autocheck.config.json` ä¸­æ·»åŠ é…ç½®ï¼š

```json
{
  "checks": {
    "myCustomCheck": {
      "enabled": true,
      "command": "npm run my-check",
      "description": "My custom validation",
      "failOnError": true
    }
  }
}
```

2. åœ¨ `package.json` ä¸­æ·»åŠ è„šæœ¬ï¼š

```json
{
  "scripts": {
    "my-check": "echo 'Running custom check...'"
  }
}
```

3. åœ¨ `scripts/auto-verify.sh` ä¸­æ·»åŠ æ£€æŸ¥é€»è¾‘ã€‚

---

## ğŸ“¦ ç›¸å…³æ–‡ä»¶

```
frontend/
â”œâ”€â”€ .autocheck.config.json      # é…ç½®æ–‡ä»¶
â”œâ”€â”€ .autocheck.log              # æ—¥å¿—æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ AUTO-CHECK-README.md        # æœ¬æ–‡æ¡£
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ health-check.js         # å¥åº·æ£€æŸ¥è„šæœ¬
â”‚   â”œâ”€â”€ quick-check.sh          # å¿«é€Ÿæ£€æŸ¥è„šæœ¬
â”‚   â””â”€â”€ auto-verify.sh          # è‡ªåŠ¨éªŒè¯è„šæœ¬
â””â”€â”€ package.json                # NPM è„šæœ¬é…ç½®
```

---

## âœ… æ£€æŸ¥æ¸…å•

åœ¨æ¯æ¬¡ä»»åŠ¡å®Œæˆåï¼Œç¡®ä¿ä»¥ä¸‹æ£€æŸ¥é€šè¿‡ï¼š

- [ ] TypeScript ç±»å‹æ£€æŸ¥æ— é”™è¯¯
- [ ] é¡¹ç›®å¯ä»¥æˆåŠŸæ„å»º
- [ ] å¼€å‘æœåŠ¡å™¨å¯ä»¥æ­£å¸¸å¯åŠ¨
- [ ] æµè§ˆå™¨å¯ä»¥è®¿é—®åº”ç”¨
- [ ] æ§åˆ¶å°æ— é”™è¯¯ä¿¡æ¯
- [ ] æ‰€æœ‰é¡µé¢æ­£å¸¸æ¸²æŸ“
- [ ] äº¤äº’åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

## ğŸ”— ç›¸å…³å‘½ä»¤é€ŸæŸ¥

| å‘½ä»¤ | ç”¨é€” | è€—æ—¶ |
|------|------|------|
| `npm run type-check` | ç±»å‹æ£€æŸ¥ | ~3s |
| `npm run build` | æ„å»ºéªŒè¯ | ~10s |
| `npm run health-check` | å¥åº·æ£€æŸ¥ | ~30s |
| `npm run quick-check` | å¿«é€Ÿæ£€æŸ¥ | ~15s |
| `npm run verify` | å®Œæ•´éªŒè¯ | ~15s |
| `bash scripts/auto-verify.sh` | è‡ªåŠ¨éªŒè¯ | ~20s |

---

## ğŸ’¡ æç¤º

1. **å®šæœŸè¿è¡Œ**: å»ºè®®æ¯å®Œæˆä¸€ä¸ªåŠŸèƒ½æ¨¡å—å°±è¿è¡Œä¸€æ¬¡å®Œæ•´éªŒè¯
2. **æäº¤å‰å¿…æŸ¥**: æäº¤ä»£ç åˆ° Git å‰å¿…é¡»é€šè¿‡ `quick-check`
3. **å‘å¸ƒå‰å¿…æŸ¥**: éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå‰å¿…é¡»é€šè¿‡ `verify` å’Œ `health-check`
4. **CI/CD é›†æˆ**: å¯ä»¥å°†è¿™äº›æ£€æŸ¥é›†æˆåˆ° CI/CD æµç¨‹ä¸­

---

## ğŸ“ é—®é¢˜åé¦ˆ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. `.autocheck.log` æ—¥å¿—æ–‡ä»¶
2. `/tmp/*_output.log` ä¸´æ—¶æ—¥å¿—
3. æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

---

**æœ€åæ›´æ–°**: 2025-10-10
**ç‰ˆæœ¬**: 1.0.0
